# backend/pyproject.toml

[tool.black]
line-length = 100
target-version = ['py311']
include = '\.pyi?$'
exclude = '''
/(
    \.git
    | \.hg
    | \.mypy_cache
    | \.tox
    | \.venv
    | _build
    | buck-out
    | build
    | dist
    | migrations
)/
'''

[tool.isort]
profile = 'black'
line_length = 100
multi_line_output = 3
include_trailing_comma = true
force_grid_wrap = 0
use_parentheses = true
ensure_newline_before_comments = true
skip_gitignore = true
skip_glob = ['*/migrations/*']

[tool.mypy]
python_version = '3.11'
warn_return_any = true
warn_unused_configs = true
disallow_untyped_defs = false
ignore_missing_imports = true
exclude = [
    'migrations/',
    'venv/',
    'build/',
    'dist/',
]

[tool.pytest.ini_options]
DJANGO_SETTINGS_MODULE = 'config.settings.test'
python_files = ['test_*.py']
python_classes = ['Test*']
python_functions = ['test_*']
addopts = [
    '--tb=short',
    '--strict-markers',
    '--cov=apps',
    '--cov-report=xml',
    '--cov-report=html',
    '--cov-report=term-missing:skip-covered',
    '--cov-fail-under=80',
]
markers = [
    'slow: marks tests as slow (deselect with "-m "not slow"")',
    'integration: marks tests as integration tests',
]
