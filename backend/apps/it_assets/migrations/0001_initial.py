# Generated by Django 5.2.10 on 2026-01-21 13:24

import django.core.validators
import django.db.models.deletion
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('assets', '0006_migrate_unit_data'),
        ('organizations', '0005_add_base_model_fields'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Software',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_deleted', models.BooleanField(db_comment='Soft delete flag, records are filtered out by default', db_index=True, default=False, verbose_name='Is Deleted')),
                ('deleted_at', models.DateTimeField(blank=True, db_comment='Timestamp when record was soft deleted', null=True, verbose_name='Deleted At')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_comment='Timestamp when record was created', verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, db_comment='Timestamp when record was last updated', verbose_name='Updated At')),
                ('custom_fields', models.JSONField(blank=True, db_comment='Dynamic fields for metadata-driven extensions', default=dict, verbose_name='Custom Fields')),
                ('name', models.CharField(help_text='Software name', max_length=200)),
                ('vendor', models.CharField(blank=True, help_text='Software vendor/manufacturer', max_length=200, null=True)),
                ('version', models.CharField(blank=True, help_text='Software version', max_length=100, null=True)),
                ('category', models.CharField(blank=True, help_text='Software category (e.g., Productivity, Security, Development)', max_length=100, null=True)),
                ('license_type', models.CharField(choices=[('open_source', 'Open Source'), ('freeware', 'Freeware'), ('commercial', 'Commercial'), ('enterprise', 'Enterprise'), ('subscription', 'Subscription'), ('oem', 'OEM')], default='commercial', help_text='Type of software license', max_length=50)),
                ('description', models.TextField(blank=True, help_text='Software description', null=True)),
                ('website_url', models.URLField(blank=True, help_text='Official website URL', max_length=500, null=True)),
                ('created_by', models.ForeignKey(blank=True, db_comment='User who created this record', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='Created By')),
                ('deleted_by', models.ForeignKey(blank=True, db_comment='User who soft deleted this record', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_deleted', to=settings.AUTH_USER_MODEL, verbose_name='Deleted By')),
                ('organization', models.ForeignKey(blank=True, db_comment='Organization for multi-tenant data isolation', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='%(app_label)s_%(class)s_set', to='organizations.organization', verbose_name='Organization')),
                ('updated_by', models.ForeignKey(blank=True, db_comment='User who last updated this record', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL, verbose_name='Updated By')),
            ],
            options={
                'verbose_name': 'Software',
                'verbose_name_plural': 'Software',
                'db_table': 'software',
                'ordering': ['name', 'version'],
            },
        ),
        migrations.CreateModel(
            name='SoftwareLicense',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_deleted', models.BooleanField(db_comment='Soft delete flag, records are filtered out by default', db_index=True, default=False, verbose_name='Is Deleted')),
                ('deleted_at', models.DateTimeField(blank=True, db_comment='Timestamp when record was soft deleted', null=True, verbose_name='Deleted At')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_comment='Timestamp when record was created', verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, db_comment='Timestamp when record was last updated', verbose_name='Updated At')),
                ('custom_fields', models.JSONField(blank=True, db_comment='Dynamic fields for metadata-driven extensions', default=dict, verbose_name='Custom Fields')),
                ('license_key', models.CharField(blank=True, help_text='License key or serial number', max_length=500, null=True)),
                ('seats', models.PositiveIntegerField(default=1, help_text='Total number of licensed seats', validators=[django.core.validators.MinValueValidator(1)])),
                ('seats_used', models.PositiveIntegerField(default=0, help_text='Number of seats currently in use', validators=[django.core.validators.MinValueValidator(0)])),
                ('purchase_date', models.DateField(blank=True, help_text='License purchase date', null=True)),
                ('expiry_date', models.DateField(blank=True, help_text='License expiration date (null for perpetual)', null=True)),
                ('cost', models.DecimalField(blank=True, decimal_places=2, help_text='License purchase cost', max_digits=12, null=True, validators=[django.core.validators.MinValueValidator(0)])),
                ('currency', models.CharField(default='USD', help_text='Currency for cost field', max_length=10)),
                ('status', models.CharField(choices=[('active', 'Active'), ('expired', 'Expired'), ('suspended', 'Suspended'), ('terminated', 'Terminated')], default='active', help_text='License status', max_length=20)),
                ('vendor_reference', models.CharField(blank=True, help_text='Vendor reference or purchase order number', max_length=200, null=True)),
                ('notes', models.TextField(blank=True, help_text='Additional notes', null=True)),
                ('created_by', models.ForeignKey(blank=True, db_comment='User who created this record', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='Created By')),
                ('deleted_by', models.ForeignKey(blank=True, db_comment='User who soft deleted this record', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_deleted', to=settings.AUTH_USER_MODEL, verbose_name='Deleted By')),
                ('organization', models.ForeignKey(blank=True, db_comment='Organization for multi-tenant data isolation', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='%(app_label)s_%(class)s_set', to='organizations.organization', verbose_name='Organization')),
                ('software', models.ForeignKey(help_text='Related software', on_delete=django.db.models.deletion.CASCADE, related_name='licenses', to='it_assets.software')),
                ('updated_by', models.ForeignKey(blank=True, db_comment='User who last updated this record', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL, verbose_name='Updated By')),
            ],
            options={
                'verbose_name': 'Software License',
                'verbose_name_plural': 'Software Licenses',
                'db_table': 'software_license',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='LicenseAllocation',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_deleted', models.BooleanField(db_comment='Soft delete flag, records are filtered out by default', db_index=True, default=False, verbose_name='Is Deleted')),
                ('deleted_at', models.DateTimeField(blank=True, db_comment='Timestamp when record was soft deleted', null=True, verbose_name='Deleted At')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_comment='Timestamp when record was created', verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, db_comment='Timestamp when record was last updated', verbose_name='Updated At')),
                ('custom_fields', models.JSONField(blank=True, db_comment='Dynamic fields for metadata-driven extensions', default=dict, verbose_name='Custom Fields')),
                ('allocated_date', models.DateField(help_text='Date when the license was allocated')),
                ('deallocated_date', models.DateField(blank=True, help_text='Date when the license was deallocated (null if active)', null=True)),
                ('notes', models.TextField(blank=True, help_text='Notes about this allocation', null=True)),
                ('allocated_by', models.ForeignKey(blank=True, help_text='User who allocated the license', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='license_allocated', to=settings.AUTH_USER_MODEL)),
                ('asset', models.ForeignKey(help_text='Asset that received the license', on_delete=django.db.models.deletion.CASCADE, related_name='license_allocations', to='assets.asset')),
                ('created_by', models.ForeignKey(blank=True, db_comment='User who created this record', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='Created By')),
                ('deallocated_by', models.ForeignKey(blank=True, help_text='User who deallocated the license', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='license_deallocated', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, db_comment='User who soft deleted this record', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_deleted', to=settings.AUTH_USER_MODEL, verbose_name='Deleted By')),
                ('organization', models.ForeignKey(blank=True, db_comment='Organization for multi-tenant data isolation', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='%(app_label)s_%(class)s_set', to='organizations.organization', verbose_name='Organization')),
                ('updated_by', models.ForeignKey(blank=True, db_comment='User who last updated this record', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL, verbose_name='Updated By')),
                ('license', models.ForeignKey(help_text='Allocated license', on_delete=django.db.models.deletion.CASCADE, related_name='allocations', to='it_assets.softwarelicense')),
            ],
            options={
                'verbose_name': 'License Allocation',
                'verbose_name_plural': 'License Allocations',
                'db_table': 'license_allocation',
                'ordering': ['-allocated_date'],
            },
        ),
        migrations.CreateModel(
            name='ConfigurationChange',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_deleted', models.BooleanField(db_comment='Soft delete flag, records are filtered out by default', db_index=True, default=False, verbose_name='Is Deleted')),
                ('deleted_at', models.DateTimeField(blank=True, db_comment='Timestamp when record was soft deleted', null=True, verbose_name='Deleted At')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_comment='Timestamp when record was created', verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, db_comment='Timestamp when record was last updated', verbose_name='Updated At')),
                ('custom_fields', models.JSONField(blank=True, db_comment='Dynamic fields for metadata-driven extensions', default=dict, verbose_name='Custom Fields')),
                ('field_name', models.CharField(help_text='Name of the field that was changed', max_length=100)),
                ('old_value', models.TextField(blank=True, help_text='Previous value', null=True)),
                ('new_value', models.TextField(blank=True, help_text='New value', null=True)),
                ('change_reason', models.TextField(blank=True, help_text='Reason for the change', null=True)),
                ('change_date', models.DateField(help_text='Date when the change was made')),
                ('asset', models.ForeignKey(help_text='Asset that was changed', on_delete=django.db.models.deletion.CASCADE, related_name='configuration_changes', to='assets.asset')),
                ('changed_by', models.ForeignKey(blank=True, help_text='User who made the change', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='configuration_changes_made', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(blank=True, db_comment='User who created this record', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='Created By')),
                ('deleted_by', models.ForeignKey(blank=True, db_comment='User who soft deleted this record', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_deleted', to=settings.AUTH_USER_MODEL, verbose_name='Deleted By')),
                ('organization', models.ForeignKey(blank=True, db_comment='Organization for multi-tenant data isolation', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='%(app_label)s_%(class)s_set', to='organizations.organization', verbose_name='Organization')),
                ('updated_by', models.ForeignKey(blank=True, db_comment='User who last updated this record', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL, verbose_name='Updated By')),
            ],
            options={
                'verbose_name': 'Configuration Change',
                'verbose_name_plural': 'Configuration Changes',
                'db_table': 'configuration_change',
                'ordering': ['-change_date'],
                'indexes': [models.Index(fields=['organization', 'asset'], name='configurati_organiz_6d92f8_idx'), models.Index(fields=['organization', 'field_name'], name='configurati_organiz_33538e_idx'), models.Index(fields=['organization', 'change_date'], name='configurati_organiz_704a8d_idx')],
            },
        ),
        migrations.CreateModel(
            name='ITAssetInfo',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_deleted', models.BooleanField(db_comment='Soft delete flag, records are filtered out by default', db_index=True, default=False, verbose_name='Is Deleted')),
                ('deleted_at', models.DateTimeField(blank=True, db_comment='Timestamp when record was soft deleted', null=True, verbose_name='Deleted At')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_comment='Timestamp when record was created', verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, db_comment='Timestamp when record was last updated', verbose_name='Updated At')),
                ('custom_fields', models.JSONField(blank=True, db_comment='Dynamic fields for metadata-driven extensions', default=dict, verbose_name='Custom Fields')),
                ('cpu_model', models.CharField(blank=True, help_text='CPU model name', max_length=200, null=True)),
                ('cpu_cores', models.PositiveIntegerField(blank=True, help_text='Number of CPU cores', null=True, validators=[django.core.validators.MinValueValidator(1)])),
                ('cpu_threads', models.PositiveIntegerField(blank=True, help_text='Number of CPU threads', null=True, validators=[django.core.validators.MinValueValidator(1)])),
                ('ram_capacity', models.PositiveIntegerField(blank=True, help_text='RAM capacity in GB', null=True, validators=[django.core.validators.MinValueValidator(1)])),
                ('ram_type', models.CharField(blank=True, help_text='RAM type (DDR3, DDR4, DDR5)', max_length=50, null=True)),
                ('ram_slots', models.PositiveIntegerField(blank=True, help_text='Number of RAM slots', null=True, validators=[django.core.validators.MinValueValidator(1)])),
                ('disk_type', models.CharField(blank=True, choices=[('HDD', 'HDD'), ('SSD', 'SSD'), ('NVMe', 'NVMe'), ('SATA', 'SATA')], help_text='Disk type', max_length=20, null=True)),
                ('disk_capacity', models.PositiveIntegerField(blank=True, help_text='Disk capacity in GB', null=True, validators=[django.core.validators.MinValueValidator(1)])),
                ('disk_count', models.PositiveIntegerField(blank=True, help_text='Number of disks', null=True, validators=[django.core.validators.MinValueValidator(1)])),
                ('gpu_model', models.CharField(blank=True, help_text='GPU model name', max_length=200, null=True)),
                ('gpu_memory', models.PositiveIntegerField(blank=True, help_text='GPU memory in MB', null=True, validators=[django.core.validators.MinValueValidator(1)])),
                ('mac_address', models.CharField(blank=True, help_text='MAC address (XX:XX:XX:XX:XX:XX)', max_length=17, null=True, unique=True)),
                ('ip_address', models.CharField(blank=True, help_text='IP address (IPv4 or IPv6)', max_length=45, null=True)),
                ('hostname', models.CharField(blank=True, help_text='Network hostname', max_length=255, null=True)),
                ('os_name', models.CharField(blank=True, help_text='Operating system name', max_length=100, null=True)),
                ('os_version', models.CharField(blank=True, help_text='Operating system version', max_length=100, null=True)),
                ('os_architecture', models.CharField(blank=True, help_text='OS architecture (x64, x86, ARM64)', max_length=50, null=True)),
                ('os_license_key', models.CharField(blank=True, help_text='OS license key', max_length=255, null=True)),
                ('disk_encrypted', models.BooleanField(default=False, help_text='Is disk encrypted')),
                ('antivirus_software', models.CharField(blank=True, help_text='Antivirus software name', max_length=100, null=True)),
                ('antivirus_enabled', models.BooleanField(default=True, help_text='Is antivirus enabled')),
                ('ad_domain', models.CharField(blank=True, help_text='Active Directory domain', max_length=100, null=True)),
                ('ad_computer_name', models.CharField(blank=True, help_text='AD computer name', max_length=100, null=True)),
                ('asset', models.OneToOneField(help_text='Related asset', on_delete=django.db.models.deletion.CASCADE, related_name='it_info', to='assets.asset')),
                ('created_by', models.ForeignKey(blank=True, db_comment='User who created this record', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='Created By')),
                ('deleted_by', models.ForeignKey(blank=True, db_comment='User who soft deleted this record', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_deleted', to=settings.AUTH_USER_MODEL, verbose_name='Deleted By')),
                ('organization', models.ForeignKey(blank=True, db_comment='Organization for multi-tenant data isolation', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='%(app_label)s_%(class)s_set', to='organizations.organization', verbose_name='Organization')),
                ('updated_by', models.ForeignKey(blank=True, db_comment='User who last updated this record', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL, verbose_name='Updated By')),
            ],
            options={
                'verbose_name': 'IT Asset Information',
                'verbose_name_plural': 'IT Asset Information',
                'db_table': 'it_asset_info',
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['organization', 'asset'], name='it_asset_in_organiz_1050bf_idx'), models.Index(fields=['organization', 'mac_address'], name='it_asset_in_organiz_d0b35a_idx')],
            },
        ),
        migrations.CreateModel(
            name='ITMaintenanceRecord',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_deleted', models.BooleanField(db_comment='Soft delete flag, records are filtered out by default', db_index=True, default=False, verbose_name='Is Deleted')),
                ('deleted_at', models.DateTimeField(blank=True, db_comment='Timestamp when record was soft deleted', null=True, verbose_name='Deleted At')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_comment='Timestamp when record was created', verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, db_comment='Timestamp when record was last updated', verbose_name='Updated At')),
                ('custom_fields', models.JSONField(blank=True, db_comment='Dynamic fields for metadata-driven extensions', default=dict, verbose_name='Custom Fields')),
                ('maintenance_type', models.CharField(choices=[('preventive', 'Preventive'), ('corrective', 'Corrective'), ('upgrade', 'Upgrade'), ('replacement', 'Replacement'), ('inspection', 'Inspection'), ('cleaning', 'Cleaning'), ('other', 'Other')], help_text='Type of maintenance performed', max_length=50)),
                ('title', models.CharField(help_text='Brief title of the maintenance activity', max_length=200)),
                ('description', models.TextField(blank=True, help_text='Detailed description of work performed', null=True)),
                ('maintenance_date', models.DateField(help_text='Date when maintenance was performed')),
                ('cost', models.DecimalField(blank=True, decimal_places=2, help_text='Cost of maintenance (if applicable)', max_digits=12, null=True, validators=[django.core.validators.MinValueValidator(0)])),
                ('vendor', models.CharField(blank=True, help_text='External vendor who performed the maintenance', max_length=200, null=True)),
                ('notes', models.TextField(blank=True, help_text='Additional notes', null=True)),
                ('asset', models.ForeignKey(help_text='Asset that was maintained', on_delete=django.db.models.deletion.CASCADE, related_name='it_maintenance_records', to='assets.asset')),
                ('created_by', models.ForeignKey(blank=True, db_comment='User who created this record', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='Created By')),
                ('deleted_by', models.ForeignKey(blank=True, db_comment='User who soft deleted this record', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_deleted', to=settings.AUTH_USER_MODEL, verbose_name='Deleted By')),
                ('organization', models.ForeignKey(blank=True, db_comment='Organization for multi-tenant data isolation', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='%(app_label)s_%(class)s_set', to='organizations.organization', verbose_name='Organization')),
                ('performed_by', models.ForeignKey(blank=True, help_text='User who performed the maintenance', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='maintenance_performed', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, db_comment='User who last updated this record', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL, verbose_name='Updated By')),
            ],
            options={
                'verbose_name': 'IT Maintenance Record',
                'verbose_name_plural': 'IT Maintenance Records',
                'db_table': 'it_maintenance_record',
                'ordering': ['-maintenance_date'],
                'indexes': [models.Index(fields=['organization', 'asset'], name='it_maintena_organiz_60aed1_idx'), models.Index(fields=['organization', 'maintenance_type'], name='it_maintena_organiz_579e2d_idx'), models.Index(fields=['organization', 'maintenance_date'], name='it_maintena_organiz_82571a_idx')],
            },
        ),
        migrations.AddIndex(
            model_name='software',
            index=models.Index(fields=['organization', 'name'], name='software_organiz_e661ae_idx'),
        ),
        migrations.AddIndex(
            model_name='software',
            index=models.Index(fields=['organization', 'vendor'], name='software_organiz_12bf65_idx'),
        ),
        migrations.AddIndex(
            model_name='software',
            index=models.Index(fields=['organization', 'category'], name='software_organiz_ab2a43_idx'),
        ),
        migrations.AddIndex(
            model_name='softwarelicense',
            index=models.Index(fields=['organization', 'software'], name='software_li_organiz_94acb1_idx'),
        ),
        migrations.AddIndex(
            model_name='softwarelicense',
            index=models.Index(fields=['organization', 'license_key'], name='software_li_organiz_1f350a_idx'),
        ),
        migrations.AddIndex(
            model_name='licenseallocation',
            index=models.Index(fields=['organization', 'license'], name='license_all_organiz_0311b5_idx'),
        ),
        migrations.AddIndex(
            model_name='licenseallocation',
            index=models.Index(fields=['organization', 'asset'], name='license_all_organiz_896ed6_idx'),
        ),
        migrations.AddIndex(
            model_name='licenseallocation',
            index=models.Index(fields=['organization', 'asset', 'license'], name='license_all_organiz_22cfbc_idx'),
        ),
        migrations.AddConstraint(
            model_name='licenseallocation',
            constraint=models.UniqueConstraint(condition=models.Q(('deallocated_date__isnull', True)), fields=('asset', 'license', 'deallocated_date'), name='unique_active_allocation'),
        ),
    ]
